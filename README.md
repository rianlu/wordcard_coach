# WordCard Coach 单词教练

面向初中生的单词学习应用，基于 Flutter 开发。

## 核心功能

- 每日学习：结构化的新词学习流程（默认每日 10 个新词）。
- 复习练习：口语、拼写、选义等练习形式（支持错题回流与自适应题型分配）。
- 学习统计：记录学习时长、复习正确/错误等数据。
- 记忆算法：内置 SM-2 间隔重复算法。

## 学习新单词模块

学习会话采用固定阶段流程，帮助用户从“认知”到“输出”逐步掌握：

1. 学习阶段（Learning）
- 展示单词、音标、中文释义与例句。
- 支持单词发音播放，建立初始语音记忆。

2. 口语练习（Speaking）
- 跟读并识别，按匹配质量给出结果反馈。
- 学习模式下强调发音模仿与重复练习。

3. 词义辨析（Selection）
- 从 4 个选项中选择正确中文释义。
- 支持即时正误反馈与成功提示。

4. 拼写练习（Spelling）
- 根据释义与例句补全单词缺失字母。
- 支持提示、回退、错误重试与单词发音辅助。

5. 会话完成
- 本轮新词批量标记学习进度并记录统计数据。
- 弹出完成弹窗展示学习结果。

界面适配说明：
- 手机端：上下分区为主，保证单手可操作与信息聚焦。
- 平板横屏：分栏展示，提升可读性与交互密度。

## 复习模块

复习模块基于到期词（SM-2 到期）生成当轮练习，当前默认每轮最多 15 词。

题型与策略：
- 题型覆盖：口语、拼写、词义辨析。
- 题型分配：由纯随机调整为加权策略（结合词长、难度进行倾斜）。
- 连错保护：连续错误时临时切换到选义题，降低挫败感。
- 选项质量：选义干扰项优先同教材/同词性/相近词长，再回退随机。

错题回流：
- 首轮答错的单词会加入回流队列，最多回流 1 次。
- 回流阶段优先选义题型，帮助快速巩固。
- 进度圈会区分“首轮剩余”和“回流”状态，避免剩余次数混乱。

完成统计：
- 记录首轮复习词数、正确/错误次数、学习时长等数据。
- 复习完成弹窗采用复习主题配色，与首页复习入口风格保持一致。

## 复习算法说明（SM-2）

- 难度系数（EF）：默认 2.5，越大表示越容易。
- 复习间隔（I）：下次复习间隔天数。

核心规则：
- 评分 >= 3 视为复习成功，更新 EF 并拉长间隔。
- 评分 < 3 视为复习失败，间隔重置为 1。
- 当间隔超过 21 天，判定为已掌握。

## 快速开始

1. 环境准备：Flutter SDK、Dart。
2. 运行项目：
```bash
flutter pub get
flutter run
```

## 备份规则（当前版本）

- 备份文件扩展名：`.wcc`
- 当前仅支持 `v2` 备份格式（不兼容旧格式）。
- 备份内容包含：
  - `metadata`（版本、导出时间、账号标识等）
  - `data`（`user_stats`、`word_progress`、`daily_records`）
- 备份安全机制：
  - AES 加密（每次导出使用随机 IV）
  - HMAC-SHA256 完整性校验（导入时先验签，失败则拒绝导入）
- 导入行为：
  - 导入会覆盖当前学习进度数据，请谨慎操作
  - 当检测到账号不一致且本地已有较多学习记录时，会弹出高风险确认提示
  - 备份文件可跨设备导入（文件未被篡改）
